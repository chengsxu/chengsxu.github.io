{"title":"imx6ull裸机开发(4)","date":"2025-02-28T05:41:50.000Z","source":"_posts/imx6ull裸机开发(4).md","raw":"---\ntitle: imx6ull裸机开发(4)\ndate: 2025-02-28 13:41:50\ncategories: \ntags: \n- imx6ull\n---\n\nMMDC、RTC、I2C、SPI\n\n<!-- more -->\n\n# Multi-Mode DDR Controller (MMDC)\n\n## 时钟\n\n- imx6ull时钟设置DDR为PFD2 400MHz（实际为396MHz）\n\n![image-20250228225826030](imx6ull裸机开发(4)/image-20250228225826030.png)\n\n- CBCMR[PRE_PERIPH2_CLK_SEL]\n\n![image-20250228230621874](imx6ull裸机开发(4)/image-20250228230621874.png)\n\n- CBCDR[PERIPH2_CLK_SEL]\n\n![image-20250228230800554](imx6ull裸机开发(4)/image-20250228230800554.png)\n\n- CBCDR[FABRIC_MMDC_PODF]\n\n![image-20250228231143317](imx6ull裸机开发(4)/image-20250228231143317.png)\n\n## DDR3L\n\n- 型号NT5CC256M16EP-EK\n- 512MB\n\n- NXP DDR测试程序ddr_stress_tester\n\n# LCD\n\n...\n\n# RTC\n\nSecure Non-Volatile Storage(SNVS)\n\n## SNVS_HPCOMR[NPSWA_EN]\n\n![image-20250301133928537](imx6ull裸机开发(4)/image-20250301133928537.png)\n\n## SNVS_LPCR[SRTC_ENV]\n\n![image-20250301134508865](imx6ull裸机开发(4)/image-20250301134508865.png)\n\n## 获取计数值\n\nSNVS_SRTCMR 和 SNVS_SRTCLR\n\n- SRTC 计数器是 32 位的，不是 47 位！\n\n- SNVS_SRTCMR 的 bit14:0 这 15 位是 SRTC 计数器的高 15 位。\n\n- SNVS_SRTCLR 的 bit31:bit15 这 17 位是 SRTC 计数器的低 17 位。\n\n# I2C\n\n## I2C协议介绍\n\n- 起始位：SCL高电平的时候，SDA下降沿\n\n![image-20250301144810634](imx6ull裸机开发(4)/image-20250301144810634.png)\n\n- 停止位：SCL高电平的时候，SDA上升沿\n\n![image-20250301144958490](imx6ull裸机开发(4)/image-20250301144958490.png)\n\n- 数据传输：SCL低电平时SDA必须稳定\n\n![image-20250301145051331](imx6ull裸机开发(4)/image-20250301145051331.png)\n\n- 应答信号：主机提供时钟，将SDA拉低表示ACK，将SDA拉高表示NOACK\n\n- I2C 写时序\n\n![image-20250301172209134](imx6ull裸机开发(4)/image-20250301172209134.png)\n\n- I2C 读时序\n\n![image-20250301172223762](imx6ull裸机开发(4)/image-20250301172223762.png)\n\n## imx6ull I2C Controler\n\n### 引脚复用\n\n![image-20250301150553968](imx6ull裸机开发(4)/image-20250301150553968.png)\n\n### 时钟\n\n![image-20250301150718964](imx6ull裸机开发(4)/image-20250301150718964.png)\n\n### 寄存器\n\n- I2Cx_IFDR\nIPG_CLK_ROOT时钟66MHz，如果实现100KHz的标准I2C速率，则分频系数位66Mhz / 100KHz = 660，查表可知，配置IC值为0x38或者0x15\n\n![image-20250301152103670](imx6ull裸机开发(4)/image-20250301152103670.png)\n\n- I2Cx_I2CR\n\n![image-20250301152313271](imx6ull裸机开发(4)/image-20250301152313271.png)\n\n| 位名称  | 功能                                       | 配置值 |\n| ------- | ------------------------------------------ | ------ |\n| IEN[7]  | I2C enable                                 | 1      |\n| IIEN[6] | I2C interrupt enable                       | 0      |\n| MSTA    | Master/Slave mode select bit.              | 1      |\n| MTX     | Transmit(1)/Receive(0) mode select bit.    | -      |\n| TXAK    | Transmit acknowledge enable                | -      |\n| RSTA    | Generates a Repeated Start condition 1有效 | -      |\n\n- I2Cx_I2SR\n\n![image-20250301153035812](imx6ull裸机开发(4)/image-20250301153035812.png)\n\n| 位名称 | 功能                                                         | 配置值 |\n| ------ | ------------------------------------------------------------ | ------ |\n| ICF    | Data transferring bit.  1：complete 0： progress             | -      |\n| IBB    | I2C bus busy bit. 1:Busy 0:idle                              | -      |\n| IAL    | Arbitration lost. 0：No arbitration lost 1：Arbitration is lost |        |\n| RXAK   | Received acknowledge. 0:Ack 1:noAck                          | -      |\n\n- I2Cx_I2DR\n\n![image-20250301153529292](imx6ull裸机开发(4)/image-20250301153529292.png)\n\n# SPI\n\n## SPI协议介绍\n\n- 全双工，速度快（几十至上百兆）\n\n- 一般情况下分为4条线，CS、SCLK、MOSI、MISO，CS拉低有效\n- 工作模式：根据串行时钟极性(CPOL)和相位(CPHA)来配置\n\n|        | CPOL=0                                 | CPOL=1                                 |\n| ------ | -------------------------------------- | -------------------------------------- |\n| CPHA=0 | 时钟空闲状态为低、第一个跳变沿采集数据 | 时钟空闲状态为高、第一个跳变沿采集数据 |\n| CPHA=1 | 时钟空闲状态为低、第二个跳变沿采集数据 | 时钟空闲状态为高、第二个跳变沿采集数据 |\n\n![image-20250302115338017](imx6ull裸机开发(4)/image-20250302115338017.png)\n\n- 时序：以CPOL=0，CPHA=1工作模式为例，见下图\n\n![image-20250302115655548](imx6ull裸机开发(4)/image-20250302115655548.png)\n\n## Enhanced Configurable SPI (ECSPI)\n\n## 时钟\n\n![image-20250302134411147](imx6ull裸机开发(4)/image-20250302134411147.png)\n\n![image-20250302134833548](imx6ull裸机开发(4)/image-20250302134833548.png)\n\npll3_sw_clk=480MHz \n\n480 / 8 = 60Mhz\n\n### CCM_CSCDR2[ECSPI_CLK_SEL] 配置为0\n\n![image-20250302135020795](imx6ull裸机开发(4)/image-20250302135020795.png)\n\n### ECSPI_CLK_PODF[ECSPI_CLK_SEL] 配置为0 ，1分频\n\n![image-20250302135311246](imx6ull裸机开发(4)/image-20250302135311246.png)\n\n###  寄存器\n\n### ECSPIx_RXDATA\n\n![image-20250302130932530](imx6ull裸机开发(4)/image-20250302130932530.png)\n\n### ECSPIx_TXDATA\n\n![image-20250302131019255](imx6ull裸机开发(4)/image-20250302131019255.png)\n\n### ECSPIx_CONREG\n\n| 位名称                | 功能                                                         | 配置值 |\n| --------------------- | ------------------------------------------------------------ | ------ |\n| EN[0]                 | SPI Block Enable Control                                     | 1      |\n| HT[1]                 | Hardware Trigger Enable.                                     | 0      |\n| XCH[2]                | SPI Exchange Bit.                                            | 0      |\n| SMC[3]                | Immediately starts a SPI burst when data is written in TXFIFO | 1      |\n| CHANNEL_MODE[4:7]     | SPI CHANNEL MODE selects the mode for each SPI channel.      | 1      |\n| POST_DIVIDER[8:11]    | SPI Post Divider.                                            | -      |\n| PRE_DIVIDER[12:15]    | SPI Pre Divider.                                             | -      |\n| CHANNEL_SELECT[18:19] | SPI CHANNEL SELECT bits                                      | b00    |\n| BURST_LENGTH[20:31]   | Burst Length.(设置8bit 一个字节)                             | 7      |\n\n![image-20250302131055092](imx6ull裸机开发(4)/image-20250302131055092.png)\n\n### ECSPIx_CONFIGREG\n\n| 位名称          | 功能                                                         | 配置值 |\n| --------------- | ------------------------------------ | ------ |\n| SCLK_PHA[0:3]   | SPI Clock/Data Phase Control.                                | 0      |\n| SCLK_PO[4:7]    | SPI Clock Polarity Control.                                  | 0      |\n| SS_CTL[8:11]    | SPI SS Wave Form Select.                                     | 0      |\n| SS_POL[12:15]   | SPI SS Polarity Select.                                      | 0      |\n| DATA_CTL[16:19] | Controls inactive state of the data line for each SPI channel. | 0      |\n| SCLK_CTL[20:23] | Controls the inactive state of SCLK for each SPI channel.    | 0      |\n\n![image-20250302132046581](imx6ull裸机开发(4)/image-20250302132046581.png)\n\n### ECSPIx_STATREG\n\n| 位名称          | 功能         | 配置值 |\n| --------------- | ------------------- | ------ |\n| TE[0]           | TXFIFO Empty.        | -      |\n| RR[3]  | RXFIFO Ready.                  | -      |\n\n![image-20250302133030343](imx6ull裸机开发(4)/image-20250302133030343.png)\n\n### ECSPIx_PERIODREG\n\n| 位名称          | 功能         | 配置值 |\n| --------------- | ------------------- | ------ |\n| SAMPLE_PERIOD[0:14] | Sample Period Control.Control the number of wait states | 0x2000 |\n| CSRC[15] | Clock Source Control. | 0     |\n| CSD_CTL[16:21] | 片选延迟 | - |\n\n![image-20250302133753353](imx6ull裸机开发(4)/image-20250302133753353.png)\n\n# 各个协议中MSB、LSB传输顺序\n\n| 总线类型 | 默认数据传输顺序            |\n| -------- | --------------------------- |\n| **UART** | **LSB 优先**（低位先传）    |\n| **SPI**  | **可配置（常见 MSB 优先）** |\n| **I²C**  | **MSB 优先**（高位先传）    |\n\n\n\n\n\n\n\n\n\n","slug":"imx6ull裸机开发(4)","published":true,"updated":"2025-03-10T13:18:27.352Z","_id":"cm833960s000xi0q6gpx1bjvq","comments":true,"layout":"post","photos":[],"html":"<p>MMDC、RTC、I2C、SPI</p>\n<span id=\"more\"></span>\n\n<h1 id=\"Multi-Mode-DDR-Controller-MMDC\"><a href=\"#Multi-Mode-DDR-Controller-MMDC\" class=\"headerlink\" title=\"Multi-Mode DDR Controller (MMDC)\"></a>Multi-Mode DDR Controller (MMDC)</h1><h2 id=\"时钟\"><a href=\"#时钟\" class=\"headerlink\" title=\"时钟\"></a>时钟</h2><ul>\n<li>imx6ull时钟设置DDR为PFD2 400MHz（实际为396MHz）</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228225826030.png\" alt=\"image-20250228225826030\"></p>\n<ul>\n<li>CBCMR[PRE_PERIPH2_CLK_SEL]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228230621874.png\" alt=\"image-20250228230621874\"></p>\n<ul>\n<li>CBCDR[PERIPH2_CLK_SEL]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228230800554.png\" alt=\"image-20250228230800554\"></p>\n<ul>\n<li>CBCDR[FABRIC_MMDC_PODF]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228231143317.png\" alt=\"image-20250228231143317\"></p>\n<h2 id=\"DDR3L\"><a href=\"#DDR3L\" class=\"headerlink\" title=\"DDR3L\"></a>DDR3L</h2><ul>\n<li><p>型号NT5CC256M16EP-EK</p>\n</li>\n<li><p>512MB</p>\n</li>\n<li><p>NXP DDR测试程序ddr_stress_tester</p>\n</li>\n</ul>\n<h1 id=\"LCD\"><a href=\"#LCD\" class=\"headerlink\" title=\"LCD\"></a>LCD</h1><p>…</p>\n<h1 id=\"RTC\"><a href=\"#RTC\" class=\"headerlink\" title=\"RTC\"></a>RTC</h1><p>Secure Non-Volatile Storage(SNVS)</p>\n<h2 id=\"SNVS-HPCOMR-NPSWA-EN\"><a href=\"#SNVS-HPCOMR-NPSWA-EN\" class=\"headerlink\" title=\"SNVS_HPCOMR[NPSWA_EN]\"></a>SNVS_HPCOMR[NPSWA_EN]</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301133928537.png\" alt=\"image-20250301133928537\"></p>\n<h2 id=\"SNVS-LPCR-SRTC-ENV\"><a href=\"#SNVS-LPCR-SRTC-ENV\" class=\"headerlink\" title=\"SNVS_LPCR[SRTC_ENV]\"></a>SNVS_LPCR[SRTC_ENV]</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301134508865.png\" alt=\"image-20250301134508865\"></p>\n<h2 id=\"获取计数值\"><a href=\"#获取计数值\" class=\"headerlink\" title=\"获取计数值\"></a>获取计数值</h2><p>SNVS_SRTCMR 和 SNVS_SRTCLR</p>\n<ul>\n<li><p>SRTC 计数器是 32 位的，不是 47 位！</p>\n</li>\n<li><p>SNVS_SRTCMR 的 bit14:0 这 15 位是 SRTC 计数器的高 15 位。</p>\n</li>\n<li><p>SNVS_SRTCLR 的 bit31:bit15 这 17 位是 SRTC 计数器的低 17 位。</p>\n</li>\n</ul>\n<h1 id=\"I2C\"><a href=\"#I2C\" class=\"headerlink\" title=\"I2C\"></a>I2C</h1><h2 id=\"I2C协议介绍\"><a href=\"#I2C协议介绍\" class=\"headerlink\" title=\"I2C协议介绍\"></a>I2C协议介绍</h2><ul>\n<li>起始位：SCL高电平的时候，SDA下降沿</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301144810634.png\" alt=\"image-20250301144810634\"></p>\n<ul>\n<li>停止位：SCL高电平的时候，SDA上升沿</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301144958490.png\" alt=\"image-20250301144958490\"></p>\n<ul>\n<li>数据传输：SCL低电平时SDA必须稳定</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301145051331.png\" alt=\"image-20250301145051331\"></p>\n<ul>\n<li><p>应答信号：主机提供时钟，将SDA拉低表示ACK，将SDA拉高表示NOACK</p>\n</li>\n<li><p>I2C 写时序</p>\n</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301172209134.png\" alt=\"image-20250301172209134\"></p>\n<ul>\n<li>I2C 读时序</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301172223762.png\" alt=\"image-20250301172223762\"></p>\n<h2 id=\"imx6ull-I2C-Controler\"><a href=\"#imx6ull-I2C-Controler\" class=\"headerlink\" title=\"imx6ull I2C Controler\"></a>imx6ull I2C Controler</h2><h3 id=\"引脚复用\"><a href=\"#引脚复用\" class=\"headerlink\" title=\"引脚复用\"></a>引脚复用</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301150553968.png\" alt=\"image-20250301150553968\"></p>\n<h3 id=\"时钟-1\"><a href=\"#时钟-1\" class=\"headerlink\" title=\"时钟\"></a>时钟</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301150718964.png\" alt=\"image-20250301150718964\"></p>\n<h3 id=\"寄存器\"><a href=\"#寄存器\" class=\"headerlink\" title=\"寄存器\"></a>寄存器</h3><ul>\n<li>I2Cx_IFDR<br>IPG_CLK_ROOT时钟66MHz，如果实现100KHz的标准I2C速率，则分频系数位66Mhz &#x2F; 100KHz &#x3D; 660，查表可知，配置IC值为0x38或者0x15</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301152103670.png\" alt=\"image-20250301152103670\"></p>\n<ul>\n<li>I2Cx_I2CR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301152313271.png\" alt=\"image-20250301152313271\"></p>\n<table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>IEN[7]</td>\n<td>I2C enable</td>\n<td>1</td>\n</tr>\n<tr>\n<td>IIEN[6]</td>\n<td>I2C interrupt enable</td>\n<td>0</td>\n</tr>\n<tr>\n<td>MSTA</td>\n<td>Master&#x2F;Slave mode select bit.</td>\n<td>1</td>\n</tr>\n<tr>\n<td>MTX</td>\n<td>Transmit(1)&#x2F;Receive(0) mode select bit.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>TXAK</td>\n<td>Transmit acknowledge enable</td>\n<td>-</td>\n</tr>\n<tr>\n<td>RSTA</td>\n<td>Generates a Repeated Start condition 1有效</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>I2Cx_I2SR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301153035812.png\" alt=\"image-20250301153035812\"></p>\n<table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ICF</td>\n<td>Data transferring bit.  1：complete 0： progress</td>\n<td>-</td>\n</tr>\n<tr>\n<td>IBB</td>\n<td>I2C bus busy bit. 1:Busy 0:idle</td>\n<td>-</td>\n</tr>\n<tr>\n<td>IAL</td>\n<td>Arbitration lost. 0：No arbitration lost 1：Arbitration is lost</td>\n<td></td>\n</tr>\n<tr>\n<td>RXAK</td>\n<td>Received acknowledge. 0:Ack 1:noAck</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>I2Cx_I2DR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301153529292.png\" alt=\"image-20250301153529292\"></p>\n<h1 id=\"SPI\"><a href=\"#SPI\" class=\"headerlink\" title=\"SPI\"></a>SPI</h1><h2 id=\"SPI协议介绍\"><a href=\"#SPI协议介绍\" class=\"headerlink\" title=\"SPI协议介绍\"></a>SPI协议介绍</h2><ul>\n<li><p>全双工，速度快（几十至上百兆）</p>\n</li>\n<li><p>一般情况下分为4条线，CS、SCLK、MOSI、MISO，CS拉低有效</p>\n</li>\n<li><p>工作模式：根据串行时钟极性(CPOL)和相位(CPHA)来配置</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>CPOL&#x3D;0</th>\n<th>CPOL&#x3D;1</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CPHA&#x3D;0</td>\n<td>时钟空闲状态为低、第一个跳变沿采集数据</td>\n<td>时钟空闲状态为高、第一个跳变沿采集数据</td>\n</tr>\n<tr>\n<td>CPHA&#x3D;1</td>\n<td>时钟空闲状态为低、第二个跳变沿采集数据</td>\n<td>时钟空闲状态为高、第二个跳变沿采集数据</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302115338017.png\" alt=\"image-20250302115338017\"></p>\n<ul>\n<li>时序：以CPOL&#x3D;0，CPHA&#x3D;1工作模式为例，见下图</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302115655548.png\" alt=\"image-20250302115655548\"></p>\n<h2 id=\"Enhanced-Configurable-SPI-ECSPI\"><a href=\"#Enhanced-Configurable-SPI-ECSPI\" class=\"headerlink\" title=\"Enhanced Configurable SPI (ECSPI)\"></a>Enhanced Configurable SPI (ECSPI)</h2><h2 id=\"时钟-2\"><a href=\"#时钟-2\" class=\"headerlink\" title=\"时钟\"></a>时钟</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302134411147.png\" alt=\"image-20250302134411147\"></p>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302134833548.png\" alt=\"image-20250302134833548\"></p>\n<p>pll3_sw_clk&#x3D;480MHz </p>\n<p>480 &#x2F; 8 &#x3D; 60Mhz</p>\n<h3 id=\"CCM-CSCDR2-ECSPI-CLK-SEL-配置为0\"><a href=\"#CCM-CSCDR2-ECSPI-CLK-SEL-配置为0\" class=\"headerlink\" title=\"CCM_CSCDR2[ECSPI_CLK_SEL] 配置为0\"></a>CCM_CSCDR2[ECSPI_CLK_SEL] 配置为0</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302135020795.png\" alt=\"image-20250302135020795\"></p>\n<h3 id=\"ECSPI-CLK-PODF-ECSPI-CLK-SEL-配置为0-，1分频\"><a href=\"#ECSPI-CLK-PODF-ECSPI-CLK-SEL-配置为0-，1分频\" class=\"headerlink\" title=\"ECSPI_CLK_PODF[ECSPI_CLK_SEL] 配置为0 ，1分频\"></a>ECSPI_CLK_PODF[ECSPI_CLK_SEL] 配置为0 ，1分频</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302135311246.png\" alt=\"image-20250302135311246\"></p>\n<h3 id=\"寄存器-1\"><a href=\"#寄存器-1\" class=\"headerlink\" title=\"寄存器\"></a>寄存器</h3><h3 id=\"ECSPIx-RXDATA\"><a href=\"#ECSPIx-RXDATA\" class=\"headerlink\" title=\"ECSPIx_RXDATA\"></a>ECSPIx_RXDATA</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302130932530.png\" alt=\"image-20250302130932530\"></p>\n<h3 id=\"ECSPIx-TXDATA\"><a href=\"#ECSPIx-TXDATA\" class=\"headerlink\" title=\"ECSPIx_TXDATA\"></a>ECSPIx_TXDATA</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302131019255.png\" alt=\"image-20250302131019255\"></p>\n<h3 id=\"ECSPIx-CONREG\"><a href=\"#ECSPIx-CONREG\" class=\"headerlink\" title=\"ECSPIx_CONREG\"></a>ECSPIx_CONREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>EN[0]</td>\n<td>SPI Block Enable Control</td>\n<td>1</td>\n</tr>\n<tr>\n<td>HT[1]</td>\n<td>Hardware Trigger Enable.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>XCH[2]</td>\n<td>SPI Exchange Bit.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SMC[3]</td>\n<td>Immediately starts a SPI burst when data is written in TXFIFO</td>\n<td>1</td>\n</tr>\n<tr>\n<td>CHANNEL_MODE[4:7]</td>\n<td>SPI CHANNEL MODE selects the mode for each SPI channel.</td>\n<td>1</td>\n</tr>\n<tr>\n<td>POST_DIVIDER[8:11]</td>\n<td>SPI Post Divider.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>PRE_DIVIDER[12:15]</td>\n<td>SPI Pre Divider.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>CHANNEL_SELECT[18:19]</td>\n<td>SPI CHANNEL SELECT bits</td>\n<td>b00</td>\n</tr>\n<tr>\n<td>BURST_LENGTH[20:31]</td>\n<td>Burst Length.(设置8bit 一个字节)</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302131055092.png\" alt=\"image-20250302131055092\"></p>\n<h3 id=\"ECSPIx-CONFIGREG\"><a href=\"#ECSPIx-CONFIGREG\" class=\"headerlink\" title=\"ECSPIx_CONFIGREG\"></a>ECSPIx_CONFIGREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SCLK_PHA[0:3]</td>\n<td>SPI Clock&#x2F;Data Phase Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SCLK_PO[4:7]</td>\n<td>SPI Clock Polarity Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SS_CTL[8:11]</td>\n<td>SPI SS Wave Form Select.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SS_POL[12:15]</td>\n<td>SPI SS Polarity Select.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>DATA_CTL[16:19]</td>\n<td>Controls inactive state of the data line for each SPI channel.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SCLK_CTL[20:23]</td>\n<td>Controls the inactive state of SCLK for each SPI channel.</td>\n<td>0</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302132046581.png\" alt=\"image-20250302132046581\"></p>\n<h3 id=\"ECSPIx-STATREG\"><a href=\"#ECSPIx-STATREG\" class=\"headerlink\" title=\"ECSPIx_STATREG\"></a>ECSPIx_STATREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>TE[0]</td>\n<td>TXFIFO Empty.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>RR[3]</td>\n<td>RXFIFO Ready.</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302133030343.png\" alt=\"image-20250302133030343\"></p>\n<h3 id=\"ECSPIx-PERIODREG\"><a href=\"#ECSPIx-PERIODREG\" class=\"headerlink\" title=\"ECSPIx_PERIODREG\"></a>ECSPIx_PERIODREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SAMPLE_PERIOD[0:14]</td>\n<td>Sample Period Control.Control the number of wait states</td>\n<td>0x2000</td>\n</tr>\n<tr>\n<td>CSRC[15]</td>\n<td>Clock Source Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>CSD_CTL[16:21]</td>\n<td>片选延迟</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302133753353.png\" alt=\"image-20250302133753353\"></p>\n<h1 id=\"各个协议中MSB、LSB传输顺序\"><a href=\"#各个协议中MSB、LSB传输顺序\" class=\"headerlink\" title=\"各个协议中MSB、LSB传输顺序\"></a>各个协议中MSB、LSB传输顺序</h1><table>\n<thead>\n<tr>\n<th>总线类型</th>\n<th>默认数据传输顺序</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>UART</strong></td>\n<td><strong>LSB 优先</strong>（低位先传）</td>\n</tr>\n<tr>\n<td><strong>SPI</strong></td>\n<td><strong>可配置（常见 MSB 优先）</strong></td>\n</tr>\n<tr>\n<td><strong>I²C</strong></td>\n<td><strong>MSB 优先</strong>（高位先传）</td>\n</tr>\n</tbody></table>\n","excerpt":"<p>MMDC、RTC、I2C、SPI</p>","more":"<h1 id=\"Multi-Mode-DDR-Controller-MMDC\"><a href=\"#Multi-Mode-DDR-Controller-MMDC\" class=\"headerlink\" title=\"Multi-Mode DDR Controller (MMDC)\"></a>Multi-Mode DDR Controller (MMDC)</h1><h2 id=\"时钟\"><a href=\"#时钟\" class=\"headerlink\" title=\"时钟\"></a>时钟</h2><ul>\n<li>imx6ull时钟设置DDR为PFD2 400MHz（实际为396MHz）</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228225826030.png\" alt=\"image-20250228225826030\"></p>\n<ul>\n<li>CBCMR[PRE_PERIPH2_CLK_SEL]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228230621874.png\" alt=\"image-20250228230621874\"></p>\n<ul>\n<li>CBCDR[PERIPH2_CLK_SEL]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228230800554.png\" alt=\"image-20250228230800554\"></p>\n<ul>\n<li>CBCDR[FABRIC_MMDC_PODF]</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250228231143317.png\" alt=\"image-20250228231143317\"></p>\n<h2 id=\"DDR3L\"><a href=\"#DDR3L\" class=\"headerlink\" title=\"DDR3L\"></a>DDR3L</h2><ul>\n<li><p>型号NT5CC256M16EP-EK</p>\n</li>\n<li><p>512MB</p>\n</li>\n<li><p>NXP DDR测试程序ddr_stress_tester</p>\n</li>\n</ul>\n<h1 id=\"LCD\"><a href=\"#LCD\" class=\"headerlink\" title=\"LCD\"></a>LCD</h1><p>…</p>\n<h1 id=\"RTC\"><a href=\"#RTC\" class=\"headerlink\" title=\"RTC\"></a>RTC</h1><p>Secure Non-Volatile Storage(SNVS)</p>\n<h2 id=\"SNVS-HPCOMR-NPSWA-EN\"><a href=\"#SNVS-HPCOMR-NPSWA-EN\" class=\"headerlink\" title=\"SNVS_HPCOMR[NPSWA_EN]\"></a>SNVS_HPCOMR[NPSWA_EN]</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301133928537.png\" alt=\"image-20250301133928537\"></p>\n<h2 id=\"SNVS-LPCR-SRTC-ENV\"><a href=\"#SNVS-LPCR-SRTC-ENV\" class=\"headerlink\" title=\"SNVS_LPCR[SRTC_ENV]\"></a>SNVS_LPCR[SRTC_ENV]</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301134508865.png\" alt=\"image-20250301134508865\"></p>\n<h2 id=\"获取计数值\"><a href=\"#获取计数值\" class=\"headerlink\" title=\"获取计数值\"></a>获取计数值</h2><p>SNVS_SRTCMR 和 SNVS_SRTCLR</p>\n<ul>\n<li><p>SRTC 计数器是 32 位的，不是 47 位！</p>\n</li>\n<li><p>SNVS_SRTCMR 的 bit14:0 这 15 位是 SRTC 计数器的高 15 位。</p>\n</li>\n<li><p>SNVS_SRTCLR 的 bit31:bit15 这 17 位是 SRTC 计数器的低 17 位。</p>\n</li>\n</ul>\n<h1 id=\"I2C\"><a href=\"#I2C\" class=\"headerlink\" title=\"I2C\"></a>I2C</h1><h2 id=\"I2C协议介绍\"><a href=\"#I2C协议介绍\" class=\"headerlink\" title=\"I2C协议介绍\"></a>I2C协议介绍</h2><ul>\n<li>起始位：SCL高电平的时候，SDA下降沿</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301144810634.png\" alt=\"image-20250301144810634\"></p>\n<ul>\n<li>停止位：SCL高电平的时候，SDA上升沿</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301144958490.png\" alt=\"image-20250301144958490\"></p>\n<ul>\n<li>数据传输：SCL低电平时SDA必须稳定</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301145051331.png\" alt=\"image-20250301145051331\"></p>\n<ul>\n<li><p>应答信号：主机提供时钟，将SDA拉低表示ACK，将SDA拉高表示NOACK</p>\n</li>\n<li><p>I2C 写时序</p>\n</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301172209134.png\" alt=\"image-20250301172209134\"></p>\n<ul>\n<li>I2C 读时序</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301172223762.png\" alt=\"image-20250301172223762\"></p>\n<h2 id=\"imx6ull-I2C-Controler\"><a href=\"#imx6ull-I2C-Controler\" class=\"headerlink\" title=\"imx6ull I2C Controler\"></a>imx6ull I2C Controler</h2><h3 id=\"引脚复用\"><a href=\"#引脚复用\" class=\"headerlink\" title=\"引脚复用\"></a>引脚复用</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301150553968.png\" alt=\"image-20250301150553968\"></p>\n<h3 id=\"时钟-1\"><a href=\"#时钟-1\" class=\"headerlink\" title=\"时钟\"></a>时钟</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301150718964.png\" alt=\"image-20250301150718964\"></p>\n<h3 id=\"寄存器\"><a href=\"#寄存器\" class=\"headerlink\" title=\"寄存器\"></a>寄存器</h3><ul>\n<li>I2Cx_IFDR<br>IPG_CLK_ROOT时钟66MHz，如果实现100KHz的标准I2C速率，则分频系数位66Mhz &#x2F; 100KHz &#x3D; 660，查表可知，配置IC值为0x38或者0x15</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301152103670.png\" alt=\"image-20250301152103670\"></p>\n<ul>\n<li>I2Cx_I2CR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301152313271.png\" alt=\"image-20250301152313271\"></p>\n<table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>IEN[7]</td>\n<td>I2C enable</td>\n<td>1</td>\n</tr>\n<tr>\n<td>IIEN[6]</td>\n<td>I2C interrupt enable</td>\n<td>0</td>\n</tr>\n<tr>\n<td>MSTA</td>\n<td>Master&#x2F;Slave mode select bit.</td>\n<td>1</td>\n</tr>\n<tr>\n<td>MTX</td>\n<td>Transmit(1)&#x2F;Receive(0) mode select bit.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>TXAK</td>\n<td>Transmit acknowledge enable</td>\n<td>-</td>\n</tr>\n<tr>\n<td>RSTA</td>\n<td>Generates a Repeated Start condition 1有效</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>I2Cx_I2SR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301153035812.png\" alt=\"image-20250301153035812\"></p>\n<table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ICF</td>\n<td>Data transferring bit.  1：complete 0： progress</td>\n<td>-</td>\n</tr>\n<tr>\n<td>IBB</td>\n<td>I2C bus busy bit. 1:Busy 0:idle</td>\n<td>-</td>\n</tr>\n<tr>\n<td>IAL</td>\n<td>Arbitration lost. 0：No arbitration lost 1：Arbitration is lost</td>\n<td></td>\n</tr>\n<tr>\n<td>RXAK</td>\n<td>Received acknowledge. 0:Ack 1:noAck</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>I2Cx_I2DR</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250301153529292.png\" alt=\"image-20250301153529292\"></p>\n<h1 id=\"SPI\"><a href=\"#SPI\" class=\"headerlink\" title=\"SPI\"></a>SPI</h1><h2 id=\"SPI协议介绍\"><a href=\"#SPI协议介绍\" class=\"headerlink\" title=\"SPI协议介绍\"></a>SPI协议介绍</h2><ul>\n<li><p>全双工，速度快（几十至上百兆）</p>\n</li>\n<li><p>一般情况下分为4条线，CS、SCLK、MOSI、MISO，CS拉低有效</p>\n</li>\n<li><p>工作模式：根据串行时钟极性(CPOL)和相位(CPHA)来配置</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>CPOL&#x3D;0</th>\n<th>CPOL&#x3D;1</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CPHA&#x3D;0</td>\n<td>时钟空闲状态为低、第一个跳变沿采集数据</td>\n<td>时钟空闲状态为高、第一个跳变沿采集数据</td>\n</tr>\n<tr>\n<td>CPHA&#x3D;1</td>\n<td>时钟空闲状态为低、第二个跳变沿采集数据</td>\n<td>时钟空闲状态为高、第二个跳变沿采集数据</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302115338017.png\" alt=\"image-20250302115338017\"></p>\n<ul>\n<li>时序：以CPOL&#x3D;0，CPHA&#x3D;1工作模式为例，见下图</li>\n</ul>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302115655548.png\" alt=\"image-20250302115655548\"></p>\n<h2 id=\"Enhanced-Configurable-SPI-ECSPI\"><a href=\"#Enhanced-Configurable-SPI-ECSPI\" class=\"headerlink\" title=\"Enhanced Configurable SPI (ECSPI)\"></a>Enhanced Configurable SPI (ECSPI)</h2><h2 id=\"时钟-2\"><a href=\"#时钟-2\" class=\"headerlink\" title=\"时钟\"></a>时钟</h2><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302134411147.png\" alt=\"image-20250302134411147\"></p>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302134833548.png\" alt=\"image-20250302134833548\"></p>\n<p>pll3_sw_clk&#x3D;480MHz </p>\n<p>480 &#x2F; 8 &#x3D; 60Mhz</p>\n<h3 id=\"CCM-CSCDR2-ECSPI-CLK-SEL-配置为0\"><a href=\"#CCM-CSCDR2-ECSPI-CLK-SEL-配置为0\" class=\"headerlink\" title=\"CCM_CSCDR2[ECSPI_CLK_SEL] 配置为0\"></a>CCM_CSCDR2[ECSPI_CLK_SEL] 配置为0</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302135020795.png\" alt=\"image-20250302135020795\"></p>\n<h3 id=\"ECSPI-CLK-PODF-ECSPI-CLK-SEL-配置为0-，1分频\"><a href=\"#ECSPI-CLK-PODF-ECSPI-CLK-SEL-配置为0-，1分频\" class=\"headerlink\" title=\"ECSPI_CLK_PODF[ECSPI_CLK_SEL] 配置为0 ，1分频\"></a>ECSPI_CLK_PODF[ECSPI_CLK_SEL] 配置为0 ，1分频</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302135311246.png\" alt=\"image-20250302135311246\"></p>\n<h3 id=\"寄存器-1\"><a href=\"#寄存器-1\" class=\"headerlink\" title=\"寄存器\"></a>寄存器</h3><h3 id=\"ECSPIx-RXDATA\"><a href=\"#ECSPIx-RXDATA\" class=\"headerlink\" title=\"ECSPIx_RXDATA\"></a>ECSPIx_RXDATA</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302130932530.png\" alt=\"image-20250302130932530\"></p>\n<h3 id=\"ECSPIx-TXDATA\"><a href=\"#ECSPIx-TXDATA\" class=\"headerlink\" title=\"ECSPIx_TXDATA\"></a>ECSPIx_TXDATA</h3><p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302131019255.png\" alt=\"image-20250302131019255\"></p>\n<h3 id=\"ECSPIx-CONREG\"><a href=\"#ECSPIx-CONREG\" class=\"headerlink\" title=\"ECSPIx_CONREG\"></a>ECSPIx_CONREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>EN[0]</td>\n<td>SPI Block Enable Control</td>\n<td>1</td>\n</tr>\n<tr>\n<td>HT[1]</td>\n<td>Hardware Trigger Enable.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>XCH[2]</td>\n<td>SPI Exchange Bit.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SMC[3]</td>\n<td>Immediately starts a SPI burst when data is written in TXFIFO</td>\n<td>1</td>\n</tr>\n<tr>\n<td>CHANNEL_MODE[4:7]</td>\n<td>SPI CHANNEL MODE selects the mode for each SPI channel.</td>\n<td>1</td>\n</tr>\n<tr>\n<td>POST_DIVIDER[8:11]</td>\n<td>SPI Post Divider.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>PRE_DIVIDER[12:15]</td>\n<td>SPI Pre Divider.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>CHANNEL_SELECT[18:19]</td>\n<td>SPI CHANNEL SELECT bits</td>\n<td>b00</td>\n</tr>\n<tr>\n<td>BURST_LENGTH[20:31]</td>\n<td>Burst Length.(设置8bit 一个字节)</td>\n<td>7</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302131055092.png\" alt=\"image-20250302131055092\"></p>\n<h3 id=\"ECSPIx-CONFIGREG\"><a href=\"#ECSPIx-CONFIGREG\" class=\"headerlink\" title=\"ECSPIx_CONFIGREG\"></a>ECSPIx_CONFIGREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SCLK_PHA[0:3]</td>\n<td>SPI Clock&#x2F;Data Phase Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SCLK_PO[4:7]</td>\n<td>SPI Clock Polarity Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SS_CTL[8:11]</td>\n<td>SPI SS Wave Form Select.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SS_POL[12:15]</td>\n<td>SPI SS Polarity Select.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>DATA_CTL[16:19]</td>\n<td>Controls inactive state of the data line for each SPI channel.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>SCLK_CTL[20:23]</td>\n<td>Controls the inactive state of SCLK for each SPI channel.</td>\n<td>0</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302132046581.png\" alt=\"image-20250302132046581\"></p>\n<h3 id=\"ECSPIx-STATREG\"><a href=\"#ECSPIx-STATREG\" class=\"headerlink\" title=\"ECSPIx_STATREG\"></a>ECSPIx_STATREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>TE[0]</td>\n<td>TXFIFO Empty.</td>\n<td>-</td>\n</tr>\n<tr>\n<td>RR[3]</td>\n<td>RXFIFO Ready.</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302133030343.png\" alt=\"image-20250302133030343\"></p>\n<h3 id=\"ECSPIx-PERIODREG\"><a href=\"#ECSPIx-PERIODREG\" class=\"headerlink\" title=\"ECSPIx_PERIODREG\"></a>ECSPIx_PERIODREG</h3><table>\n<thead>\n<tr>\n<th>位名称</th>\n<th>功能</th>\n<th>配置值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SAMPLE_PERIOD[0:14]</td>\n<td>Sample Period Control.Control the number of wait states</td>\n<td>0x2000</td>\n</tr>\n<tr>\n<td>CSRC[15]</td>\n<td>Clock Source Control.</td>\n<td>0</td>\n</tr>\n<tr>\n<td>CSD_CTL[16:21]</td>\n<td>片选延迟</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<p><img src=\"/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/image-20250302133753353.png\" alt=\"image-20250302133753353\"></p>\n<h1 id=\"各个协议中MSB、LSB传输顺序\"><a href=\"#各个协议中MSB、LSB传输顺序\" class=\"headerlink\" title=\"各个协议中MSB、LSB传输顺序\"></a>各个协议中MSB、LSB传输顺序</h1><table>\n<thead>\n<tr>\n<th>总线类型</th>\n<th>默认数据传输顺序</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>UART</strong></td>\n<td><strong>LSB 优先</strong>（低位先传）</td>\n</tr>\n<tr>\n<td><strong>SPI</strong></td>\n<td><strong>可配置（常见 MSB 优先）</strong></td>\n</tr>\n<tr>\n<td><strong>I²C</strong></td>\n<td><strong>MSB 优先</strong>（高位先传）</td>\n</tr>\n</tbody></table>","path":"2025/02/28/imx6ull裸机开发(4)/","permalink":"http://chengs.run/2025/02/28/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(4)/","tags":[{"name":"imx6ull","_id":"cm833960s000wi0q61oy1go6a","slug":"imx6ull","path":"tags/imx6ull/","permalink":"http://chengs.run/tags/imx6ull/","length":4}],"categories":[],"prev":{"title":"内存池","date":"2025-03-09T07:14:00.000Z","slug":"内存池","published":true,"updated":"2025-03-10T13:18:27.361Z","_id":"cm8339610001mi0q68bkr8t5y","layout":"post","photos":[],"excerpt":"<p>内存池</p>","path":"2025/03/09/内存池/","permalink":"http://chengs.run/2025/03/09/%E5%86%85%E5%AD%98%E6%B1%A0/","__post":true},"next":{"title":"imx6ull裸机开发(3)","date":"2025-02-23T04:39:02.637Z","slug":"imx6ull裸机开发(3)","published":true,"updated":"2025-02-23T12:38:29.902Z","_id":"cm833960r000ti0q6gotsa4w0","layout":"post","photos":[],"excerpt":"<p>EPIT、GPT、UART</p>","path":"2025/02/23/imx6ull裸机开发(3)/","permalink":"http://chengs.run/2025/02/23/imx6ull%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91(3)/","__post":true},"__post":true}